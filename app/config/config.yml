imports:
    - { resource: "%kernel.root_dir%/config/parameters.ini" }
    - { resource: "%kernel.root_dir%/config/security.yml" }
    
framework:
    charset:       UTF-8
    error_handler: null
    csrf_protection:
        enabled: true
        secret: xxxxxxxxxx
    router:        { resource: "%kernel.root_dir%/config/routing.yml" }
    validation:    { enabled: true, annotations: true }
    templating:    { engines: ['twig'] } #assets_version: SomeVersionScheme
    session:
        default_locale: en
        lifetime:       3600
        auto_start:     true
        
security:

    encoders:
        Symfony\Component\Security\Core\User\User: plaintext

#    role_hierarchy:
#        ROLE_ADMIN: ROLE_USER
#        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
        in_memory:
            users:
                user: { password: admin, roles: [ 'ROLE_USER' ] }
                admin: { password: admin, roles: [ 'ROLE_ADMIN' ] }
        fos_userbundle:
            id: fos_user.user_manager

    firewalls:
      
        dashboard:
            pattern: /dashboard.*
            http_basic: true

        admin:
            pattern: /admin/.*
            http_basic: true
            
        public:
            pattern:  /.*
            security: false      
            
        profiler:
            pattern: ^/_profiler
            security: false

        wdt:
            pattern: ^/_wdt
            security: false


    access_control:
#        - { path: /.*, roles: IS_AUTHENTICATED_ANONYMOUSLY}        
        - { path: /dashboard.*, role: ROLE_ADMIN }
        - { path: /admin/.*, role: ROLE_ADMIN  } #, requires_channel: https
#
#assetic:
#    debug: %kernel.debug%
#    use_controller: false
#    filters:
#        cssrewrite: ~
#        
#bootstrap: ~
#project_utilities: ~

#extra.config: ~
#    router:  { annotations: false }
#    request: { converters: false }
#    view:    { annotations: false, manage_null_arguments: false }
#    cache:   { annotations: false }

# AdminBundle
services:    
   kaoz4.admin.user:
      class: rs\kaoz4Bundle\Admin\UserAdmin
      tags:
        - { name: sonata.admin, manager_type: orm, group: user, label: user }
      arguments: [rs\kaoz4Bundle\Entity\User, kaoz4Bundle:UserAdmin]
      pool: AdminPool
          
fos_user:
    db_driver: orm
    firewall_name: main
    class:
        model:
            user: rs\kaoz4Bundle\Entity\User          
            
# Twig Configuration
twig:
    debug:            %kernel.debug%
    strict_variables: %kernel.debug%
    
## Doctrine Configuration
doctrine:
   dbal:
       connections:
           default:
#                driver:   %database_driver%
#                host:     %database_host%
#                dbname:   %database_name%
#                user:     %database_user%
#                password: %database_password%
                logging:  %kernel.debug%
   orm:
       auto_generate_proxy_classes: %kernel.debug%
       entity_managers:
           default:
               mappings:
                    SonataNewsBundle: ~
                    FOSUserBundle: ~
                    kaoz4Bundle: ~

## Swiftmailer Configuration
#swiftmailer:
#    transport:  smtp
#    encryption: ssl
#    auth_mode:  login
#    host:       smtp.gmail.com
#    username:   xxxxxxxx
#    password:   xxxxxxxx
sonata_news:
  admin:
    post:     { entity: rs\kaoz4Bundle\Entity\BlogPost }
    comment:  { entity: rs\kaoz4Bundle\Entity\Comment }
    tag:      { entity: rs\kaoz4Bundle\Entity\Tag }

imports:
    - { resource: "@kaoz4Bundle/Resources/config/menu.xml" }
    - { resource: "@SonataNewsBundle/Resources/config/news.xml" }
    - { resource: "@SonataNewsBundle/Resources/config/admin.xml" }

knplabs_menu:
    twig: true
    templating: true
    provider: true